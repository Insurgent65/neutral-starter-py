{:*
    Data for this route
*:}
{:data; #/data.json :}

{:snip; current:template:body-main-content >>
    <div class="container py-4">
        {:filled; dev_admin->error >>
            <div class="alert alert-danger">{:trans; {:;dev_admin->error:} :}</div>
        :}
        {:filled; dev_admin->message >>
            <div class="alert alert-success">{:trans; {:;dev_admin->message:} :}</div>
        :}

        {:!bool; dev_admin->auth_ok >>
            <h3>{:trans; Dev Admin Login :}</h3>
            <form method="post" class="card card-body mt-3">
                <input type="hidden" name="action" value="login">
                <input type="hidden" name="csrf_token" value="{:&;dev_admin->csrf_token:}">
                <div class="mb-3">
                    <label class="form-label" for="dev-admin-username">{:trans; Username :}</label>
                    <input id="dev-admin-username" class="form-control" name="username" type="text" autocomplete="username" required>
                </div>
                <div class="mb-3">
                    <label class="form-label" for="dev-admin-password">{:trans; Password :}</label>
                    <input id="dev-admin-password" class="form-control" name="password" type="password" autocomplete="current-password" required>
                </div>
                <button class="btn btn-primary" type="submit">{:trans; Sign in :}</button>
            </form>
        :}{:else;
            <div class="d-flex justify-content-between align-items-center mb-3">
                <h3 class="m-0">{:trans; Custom Overrides :}</h3>
                <form method="post">
                    <input type="hidden" name="action" value="logout">
                    <input type="hidden" name="csrf_token" value="{:&;dev_admin->csrf_token:}">
                    <button class="btn btn-outline-secondary btn-sm" type="submit">{:trans; Sign out :}</button>
                </form>
            </div>

            <form method="post" class="card card-body mb-4">
                <input type="hidden" name="action" value="save">
                <input type="hidden" name="csrf_token" value="{:&;dev_admin->csrf_token:}">
                <div class="mb-3">
                    <label class="form-label" for="comp-uuid">{:trans; Component UUID :}</label>
                    <input
                        id="comp-uuid"
                        class="form-control"
                        name="comp_uuid"
                        value="{:&;dev_admin->edit_uuid:}"
                        list="component-uuids"
                        required
                    >
                    <datalist id="component-uuids">
                        {:each; dev_admin->component_uuids none comp_uuid >>
                            <option value="{:&;comp_uuid:}"></option>
                        :}
                    </datalist>
                </div>
                <div class="mb-3">
                    <label class="form-label" for="override-json">{:trans; Override JSON :}</label>
                    <textarea id="override-json" class="form-control ff-mono" name="override_json" rows="14" required>{:&;dev_admin->edit_json:}</textarea>
                </div>
                <div class="form-check mb-3">
                    <input class="form-check-input" type="checkbox" id="override-enabled" name="enabled" value="1"{:bool; dev_admin->edit_enabled >> checked :}>
                    <label class="form-check-label" for="override-enabled">{:trans; Enabled :}</label>
                </div>
                <button class="btn btn-primary" type="submit">{:trans; Save override :}</button>
            </form>

            <h4>{:trans; Existing Overrides :}</h4>
            <div class="table-responsive">
                <table class="table table-sm table-striped">
                    <thead>
                        <tr>
                            <th>{:trans; Component UUID :}</th>
                            <th>{:trans; Enabled :}</th>
                            <th>{:trans; Updated At :}</th>
                            <th>{:trans; Load :}</th>
                        </tr>
                    </thead>
                    <tbody>
                        {:each; dev_admin->entries none entry >>
                            <tr>
                                <td><code>{:;entry->comp_uuid:}</code></td>
                                <td>{:;entry->enabled:}</td>
                                <td>{:;entry->updated_at:}</td>
                                <td><a href="?edit_uuid={:;entry->comp_uuid:}">{:trans; Load :}</a></td>
                            </tr>
                        :}
                    </tbody>
                </table>
            </div>
        :}
    </div>
:}
{:^;:}
