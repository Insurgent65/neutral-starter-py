---
name: manage-component
description: Create or modify components following the standard architecture, security standards, and best practices of the Neutral TS Starter Py framework.
---

# Create or Modify Neutral TS Component


This skill guides you through creating a completely new component in the Neutral TS framework.

- **IMPORTANT**: The components are isolated parts, and nothing should be changed outside of their directory structure.

If you need additional information for a specific case:

- Use `view_file` on `src/component/cmp_7000_hellocomp` as a component example.
- Use `view_file` on `docs/component.md` for component architecture details.
- Use `view_file` on `docs/dispatcher.md` for dispatcher patterns and business logic.
- Use `view_file` on `docs/templates-neutrats.md` for NTPL syntax reference.
- Use `view_file` on `docs/development-style-guide.md` for routing and template organization.
- Use `view_file` on `docs/translation-component.md` for translation strategies.
- Use `view_file` on `docs/model.md` for database interaction patterns.


## 1. Directory Structure

Create a new directory in `src/component/` starting with `cmp_` followed by a number and name.

Components are loaded in **alphabetical order**. A subsequent component extends or overrides the functionality of a previous one. Unless otherwise stated, use a number between 5000 and 7000.

Example: `src/component/cmp_7000_hellocomp`

```bash
mkdir -p src/component/cmp_NNNN_name
```

## 2. Manifest and Configuration

### manifest.json
Create `manifest.json` with the component metadata.

uuid must be unique and follow the `name_random` format, eg: `hellocomp_0yt2sa`

```json
{
    "uuid": "name_random",
    "name": "Component Name",
    "description": "Component description",
    "version": "1.0.0",
    "route": "/route-prefix"
}
```

### schema.json
Create `schema.json` for configuration. To add a menu item, you **must** define both the `drawer` (the top-level tab) and the `menu` (the link items inside the tab). The menu may display different options depending on whether the user is logged in ("session:true") or not ("session:").

Always create a menu unless instructed otherwise (inherit.data.drawer and inherit.data.menu).

Replace name_random with the uuid generated by the skill in `[:;data->name_random->manifest->route:]`

```json
{
    "inherit": {
        "locale": {
            "trans": {
                "en": { "Component Name": "Component Name" },
                "es": { "Component Name": "Nombre Componente" }
            }
        },
        "data": {
            "drawer": {
                "menu": {
                    "session:": {
                        "component-tab": {
                            "name": "Component Name",
                            "tabs": "component-tab",
                            "icon": "x-icon-info"
                        }
                    },
                    "session:true": {
                        "component-tab": {
                            "name": "Component Name",
                            "tabs": "component-tab",
                            "icon": "x-icon-info"
                        }
                    }
                }
            },
            "menu": {
                "session:": {
                    "component-tab": {
                        "component": {
                            "text": "Component Name",
                            "link": "[:;data->name_random->manifest->route:]",
                            "icon": "x-icon-info"
                        }
                    }
                },
                "session:true": {
                    "component-tab": {
                        "component": {
                            "text": "Component Name",
                            "link": "[:;data->name_random->manifest->route:]",
                            "icon": "x-icon-info"
                        }
                    }
                }
            }
        }
    }
}
```

### Route Reference Rule (IMPORTANT)

- In component `schema.json`, you can use route references like:
  - `[:;data->name_random->manifest->route:]`
- In Neutral templates (`.ntpl` files), do **not** use `[:;data->...:]` for component manifest routes.
  Use the dynamic form instead:
  - `{:;name_random->manifest->route:}`

This avoids mixing initialization-time schema directives with runtime template expressions.

### Documentation Reference Rule (IMPORTANT)

- In documentation, always reference a component by its **UUID** (from `manifest.json`), not by folder name.
- Folder names can change (for example `cmp_7000_hellocomp`), while UUID is the stable identity (for example `hellocomp_0yt2sa`).
- When describing links, settings, or cross-component references, use UUID-based wording.

## 3. Python Initialization

### __init__.py
Initialize the component. This is optional, only if you need to do something on component initialization.

```python
def init_component(component, component_schema, _schema):
    pass
```

## 4. Backend Routes

### route/__init__.py
Initialize the Blueprint.

```python
from app.components import create_blueprint

def init_blueprint(component, component_schema, _schema):
    """Blueprint Init"""
    bp = create_blueprint(component, component_schema) # pylint: disable=unused-variable
    # Import routes after creating the blueprint
    from . import routes  # pylint: disable=import-error,C0415,W0611
```

### route/routes.py
Define the routes. The dispatcher connects Flask requests to the Neutral Templating system.

```python
from flask import request, Response
from core.dispatcher import Dispatcher
from . import bp

@bp.route("/", defaults={"route": ""}, methods=["GET"])
@bp.route("/<path:route>", methods=["GET"])
def index(route) -> Response:
    dispatch = Dispatcher(request, route, bp.neutral_route)
    return dispatch.view.render()
```

## 5. Frontend Templates

### neutral/route/root/data.json
Define route configuration and metadata.

```json
{
    "data": {
        "current": {
            "route": {
                "title": "Page Title",
                "description": "Page Description",
                "h1": "Main Heading"
            }
        }
    }
}
```

### neutral/route/root/content-snippets.ntpl
Define the main content of the page using Neutral Templates (NTPL). It is not necessary to include h1 here.

```html
{:*
    Data for this route
    -------------------
*:}
{:data; #/data.json :}

{:snip; current:template:body-main-content >>
    <div class="container">
        <h3>{:trans; {:;local::current->route->h1:} :}</h3>
        <p>{:trans; Example of a simple component :}</p>
    </div>
:}
{:^;:}
```

## 6. Implementation Checklist

1.  **Create Directory**: `src/component/cmp_NNNN_name`
2.  **Manifest**: `src/component/cmp_NNNN_name/manifest.json` (mandatory)
3.  **Schema**: `src/component/cmp_NNNN_name/schema.json` (if needed, eg. for menu items, etc)
4.  **Init**: `src/component/cmp_NNNN_name/__init__.py` (if needed)
5.  **Route Init**: `src/component/cmp_NNNN_name/route/__init__.py` (if needed routes)
6.  **Routes**: `src/component/cmp_NNNN_name/route/routes.py` (if needed routes)
7.  **Template Data**: `src/component/cmp_NNNN_name/neutral/route/root/data.json`
8.  **Template Content**: `src/component/cmp_NNNN_name/neutral/route/root/content-snippets.ntpl`
9.  **Static Files**: `src/component/cmp_NNNN_name/static/` (if needed)

## 7. Python code quality
To finish, use `pylint` to check for errors and warnings in all python files. Running pylint in `venv`
